(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[34842],{242780:(e,t,n)=>{"use strict";n.d(t,{Xp:()=>i,A1:()=>a,Mf:()=>u,wq:()=>l,CD:()=>c,DX:()=>s,GW:()=>p,c4:()=>f,Ne:()=>y,hv:()=>m,x9:()=>d,Lv:()=>b,mA:()=>O,Ge:()=>h,sL:()=>g,B6:()=>E,vG:()=>v,QY:()=>S,X2:()=>T,dC:()=>A,bO:()=>N,eY:()=>P,bI:()=>_,Rr:()=>w,Np:()=>I,pC:()=>j,cM:()=>R,iO:()=>L,R_:()=>x,zT:()=>M,$l:()=>C,qO:()=>D,eK:()=>G,HN:()=>k,Bm:()=>Z,Kz:()=>z,gT:()=>H,JT:()=>F,CO:()=>U,NV:()=>Y,Ns:()=>B,Fz:()=>W,Nj:()=>V,op:()=>X,GI:()=>$,Cg:()=>K,WD:()=>q,rb:()=>J,it:()=>Q,br:()=>ee,Hf:()=>te,Ps:()=>ne,U7:()=>re,aH:()=>oe,qX:()=>ie,cv:()=>ae,M_:()=>ue,QT:()=>le,z_:()=>ce,Y5:()=>se,wP:()=>pe,pv:()=>fe,bM:()=>ye,Zw:()=>me,Ay:()=>de,aS:()=>be,LR:()=>Oe,VR:()=>he,A9:()=>ge,i9:()=>Ee,$f:()=>ve,F4:()=>Se,r1:()=>Te,Om:()=>Ae,_x:()=>Ne,dT:()=>Pe,jw:()=>_e,iY:()=>we,QD:()=>Ie,xD:()=>je,kg:()=>Re,ob:()=>Le,nk:()=>xe,A_:()=>Me,nY:()=>Ce,Bp:()=>De,CH:()=>Ge,Rx:()=>ke,MQ:()=>Ze,l7:()=>ze,VP:()=>He,g:()=>Fe,L0:()=>Ue,if:()=>Ye,tp:()=>Be,TA:()=>We,yg:()=>Ve,Hl:()=>Xe,y$:()=>$e,ts:()=>Ke,UJ:()=>qe,yw:()=>Je,nz:()=>Qe,RC:()=>et,om:()=>tt,XW:()=>nt,WB:()=>rt,pI:()=>ot,Dd:()=>it,V_:()=>at,TW:()=>ut,$:()=>lt,Y_:()=>ct,Ib:()=>st,_n:()=>pt});var r=n(91175),o=n.n(r),i="ANNOTATIONS:INIT_PLUGIN",a="ANNOTATIONS:EDIT",u="ANNOTATIONS:OPEN_EDITOR",l="ANNOTATIONS:SHOW",c="ANNOTATIONS:NEW",s="ANNOTATIONS:REMOVE",p="ANNOTATIONS:REMOVE_GEOMETRY",f="ANNOTATIONS:CONFIRM_REMOVE",y="ANNOTATIONS:CANCEL_REMOVE",m="ANNOTATIONS:CANCEL_EDIT",d="ANNOTATIONS:CANCEL_SHOW",b="ANNOTATIONS:SAVE",O="ANNOTATIONS:TOGGLE_ADD",h="ANNOTATIONS:TOGGLE_STYLE",g="ANNOTATIONS:SET_STYLE",E="ANNOTATIONS:RESTORE_STYLE",v="ANNOTATIONS:SET_INVALID_SELECTED",S="ANNOTATIONS:VALIDATION_ERROR",T="ANNOTATIONS:HIGHLIGHT",A="ANNOTATIONS:CLEAN_HIGHLIGHT",N="ANNOTATIONS:FILTER",P="ANNOTATIONS:CLOSE",_="ANNOTATIONS:CONFIRM_CLOSE",w="ANNOTATIONS:CANCEL_CLOSE",I="ANNOTATIONS:START_DRAWING",j="ANNOTATIONS:UNSAVED_CHANGES",R="ANNOTATIONS:VISIBILITY",L="ANNOTATIONS:TOGGLE_CHANGES_MODAL",x="ANNOTATIONS:TOGGLE_GEOMETRY_MODAL",M="ANNOTATIONS:CHANGED_PROPERTIES",C="ANNOTATIONS:UNSAVED_STYLE",D="ANNOTATIONS:TOGGLE_STYLE_MODAL",G="ANNOTATIONS:ADD_TEXT",k="ANNOTATIONS:DOWNLOAD",Z="ANNOTATIONS:LOAD_ANNOTATIONS",z="ANNOTATIONS:CHANGED_SELECTED",H="ANNOTATIONS:RESET_COORD_EDITOR",F="ANNOTATIONS:CHANGE_RADIUS",U="ANNOTATIONS:CHANGE_TEXT",Y="ANNOTATIONS:ADD_NEW_FEATURE",B="ANNOTATIONS:SET_EDITING_FEATURE",W="ANNOTATIONS:HIGHLIGHT_POINT",V="ANNOTATIONS:TOGGLE_DELETE_FT_MODAL",X="ANNOTATIONS:CONFIRM_DELETE_FEATURE",$="ANNOTATIONS:CHANGE_FORMAT",K="ANNOTATIONS:UPDATE_SYMBOLS",q="ANNOTATIONS:ERROR_SYMBOLS",J="ANNOTATIONS:SET_DEFAULT_STYLE",Q="ANNOTATIONS:LOAD_DEFAULT_STYLES",ee="ANNOTATIONS:LOADING",te="ANNOTATIONS:CHANGE_GEOMETRY_TITLE",ne="ANNOTATIONS:FILTER_MARKER",re="ANNOTATIONS:HIDE_MEASURE_WARNING",oe="ANNOTATIONS:TOGGLE_SHOW_AGAIN",ie="ANNOTATIONS:GEOMETRY_HIGHLIGHT",ae="ANNOTATIONS:UNSELECT_FEATURE",ue="ANNOTATIONS:VALIDATE_FEATURE",le=function(){return{type:i}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:K,symbols:e}},se=function(e){return{type:q,symbolErrors:e}},pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:Z,features:e,override:t}},fe=function(){return{type:X}},ye=function(e){return{type:u,id:e}},me=function(e){return{type:$,format:e}},de=function(){return{type:V}},be=function(e){return{type:W,point:e}},Oe=function(e){return{type:k,annotation:e}},he=function(e){return function(t,n){var r=o()(o()(n().layers.flat.filter((function(e){return"annotations"===e.id}))).features.filter((function(t){return t.properties.id===e})));"FeatureCollection"===r.type?t({type:a,feature:r,featureType:r.type}):t({type:a,feature:r,featureType:r.geometry.type})}},ge=function(){return{type:c}},Ee=function(e,t,n,r){return{type:z,coordinates:e,radius:t,text:n,crs:r}},ve=function(e,t){return{type:v,errorFrom:e,coordinates:t}},Se=function(){return{type:G}},Te=function(e,t){return{type:R,id:e,visibility:t}},Ae=function(e,t){return{type:M,field:e,value:t}},Ne=function(e){return{type:s,id:e}},Pe=function(e){return{type:p,id:e}},_e=function(e,t){return{type:f,id:e,attribute:t}},we=function(){return{type:y}},Ie=function(e){return{type:m,properties:e}},je=function(e,t,n,r,o,i){return{type:b,id:e,fields:t,geometry:n,style:r,newFeature:o,properties:i}},Re=function(e){return{type:O,featureType:e}},Le=function(e){return{type:h,styling:e}},xe=function(){return{type:E}},Me=function(e){return{type:g,style:e}},Ce=function(e,t,n){return{type:"ANNOTATIONS:UPDATE_GEOMETRY",geometry:e,textChanged:t,circleChanged:n}},De=function(e){return{type:S,errors:e}},Ge=function(e){return{type:T,id:e}},ke=function(){return{type:A}},Ze=function(e){return{type:l,id:e}},ze=function(){return{type:d}},He=function(e){return{type:N,filter:e}},Fe=function(){return{type:P}},Ue=function(e){return{type:_,properties:e}},Ye=function(e){return{type:j,unsavedChanges:e}},Be=function(e){return{type:C,unsavedStyle:e}},We=function(){return{type:Y}},Ve=function(e){return{type:B,feature:e}},Xe=function(){return{type:w}},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:I,options:e}},Ke=function(){return{type:L}},qe=function(){return{type:x}},Je=function(){return{type:D}},Qe=function(){return{type:H}},et=function(){return{type:ae}},tt=function(e,t,n){return{type:F,radius:e,components:t,crs:n}},nt=function(e,t){return{type:U,text:e,components:t}},rt=function(e,t){return{type:J,path:e,style:t}},ot=function(e,t,n,r,o){return{type:Q,shape:e,size:t,fillColor:n,strokeColor:r,symbolsPath:o}},it=function(e){return{type:te,title:e}},at=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";return{type:ee,name:t,value:e}},ut=function(e){return{type:ne,filter:e}},lt=function(e,t){return{type:ie,id:e,state:t}},ct=function(){return{type:re}},st=function(){return{type:oe}},pt=function(){return{type:ue}}},881808:(e,t,n)=>{"use strict";n.d(t,{eD:()=>r,AM:()=>o,ok:()=>i,Gg:()=>a,nT:()=>u,TL:()=>l,KS:()=>c,EB:()=>s,DZ:()=>p,Aw:()=>f,V_:()=>y,H0:()=>m,jW:()=>d,JZ:()=>b,fQ:()=>O,HK:()=>h,YO:()=>g,I6:()=>E});var r="MAP:LOAD_NEW_MAP",o="MAP_LOAD_MAP_CONFIG",i="MAP_CONFIG_LOADED",a="MAP_CONFIG_LOAD_ERROR",u="MAP_LOAD_INFO",l="MAP_INFO_LOAD_START",c="MAP_INFO_LOADED",s="MAP_INFO_LOAD_ERROR",p="MAP:MAP_SAVE_ERROR",f="MAP:MAP_SAVED",y="MAP:RESET_MAP_SAVE_ERROR";function m(e,t,n){return{type:i,config:e,legacy:!!t,mapId:t,zoomToExtent:n}}function d(e,t){return{type:a,error:e,mapId:t}}function b(e,t,n,r,i){return{type:o,configName:e,mapId:t,config:n,mapInfo:r,overrideConfig:i}}function O(e,t){return{type:c,mapId:t,info:e}}function h(e,t){return{type:s,mapId:e,error:t}}function g(e){return{type:l,mapId:e}}function E(e){return{type:u,mapId:e}}},580416:(e,t,n)=>{"use strict";n.d(t,{yS:()=>r,Zz:()=>o,ms:()=>i,ih:()=>a,OX:()=>u,sb:()=>l,K$:()=>c,k7:()=>s,cX:()=>p,x9:()=>f,vs:()=>y,oE:()=>m,Po:()=>d,qv:()=>b,cI:()=>O,g6:()=>h,I4:()=>g,l$:()=>E,Xv:()=>v,k3:()=>S,CQ:()=>T,R8:()=>A,HN:()=>N,sH:()=>P,c7:()=>_,_7:()=>w,eF:()=>I,O6:()=>j,ED:()=>R,RP:()=>L,sF:()=>x,VP:()=>M,He:()=>C,vO:()=>D,WO:()=>G,bh:()=>k,pV:()=>Z,MK:()=>z,ZF:()=>H,tV:()=>F,Dv:()=>U,Yz:()=>Y,kI:()=>B,XG:()=>W,A4:()=>V,Rp:()=>X,$o:()=>$,ct:()=>K,oh:()=>q,$h:()=>J,ud:()=>Q,Qr:()=>ee,LR:()=>te,nN:()=>ne,UG:()=>re,F5:()=>oe,c9:()=>ie,Jh:()=>ae,Xy:()=>ue});var r="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",i="CHANGE_GROUP_PROPERTIES",a="TOGGLE_NODE",u="SORT_NODE",l="REMOVE_NODE",c="UPDATE_NODE",s="MOVE_NODE",p="LAYER_LOADING",f="LAYER_LOAD",y="LAYER_ERROR",m="ADD_LAYER",d="ADD_GROUP",b="REMOVE_LAYER",O="SHOW_SETTINGS",h="HIDE_SETTINGS",g="UPDATE_SETTINGS",E="REFRESH_LAYERS",v="LAYERS:UPDATE_LAYERS_DIMENSION",S="LAYERS_REFRESHED",T="LAYERS_REFRESH_ERROR",A="LAYERS:BROWSE_DATA",N="LAYERS:DOWNLOAD",P="LAYERS:CLEAR_LAYERS",_="LAYERS:SELECT_NODE",w="LAYERS:FILTER_LAYERS",I="LAYERS:SHOW_LAYER_METADATA",j="LAYERS:HIDE_LAYER_METADATA",R="LAYERS:UPDATE_SETTINGS_PARAMS";function L(e,t,n){return{type:O,node:e,nodeType:t,options:n}}function x(){return{type:h}}function M(e){return{type:g,options:e}}function C(e,t){return{type:r,newProperties:t,layer:e}}function D(e,t){return{type:o,layer:e,params:t}}function G(e,t){return{type:i,newProperties:t,group:e}}function k(e,t,n){return{type:a,node:e,nodeType:t,status:!n}}function Z(e){return{type:"CONTEXT_NODE",node:e}}function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:u,node:e,order:t,sortLayers:n}}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:l,node:e,nodeType:t,removeEmpty:n}}function F(e,t,n){return{type:c,node:e,nodeType:t,options:n}}function U(e,t,n){return{type:s,node:e,groupId:t,index:n}}function Y(e){return{type:p,layerId:e}}function B(e,t){return{type:f,layerId:e,error:t}}function W(e,t,n){return{type:y,layerId:e,tilesCount:t,tilesErrorCount:n}}function V(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:m,layer:e,foreground:t}}function X(e,t,n){return{type:d,group:e,parent:t,options:n}}function $(e){return{type:b,layerId:e}}function K(e,t){return{type:r,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function q(e){return{type:S,layers:e}}function J(e,t){return{type:T,layers:e,error:t}}function Q(e,t,n,r){return{type:v,dimension:e,value:t,options:n,layers:r}}function ee(e){return{type:A,layer:e}}function te(e){return{type:N,layer:e}}function ne(){return{type:P}}function re(e,t,n){return{type:_,id:e,nodeType:t,ctrlKey:n}}function oe(e){return{type:w,text:e}}function ie(e,t){return{type:I,metadataRecord:e,maskLoading:t}}function ae(){return{type:j}}function ue(e,t){return{type:R,newParams:e,update:t}}},801550:(e,t,n)=>{"use strict";n.d(t,{pP:()=>r,TR:()=>o,N7:()=>i,mq:()=>a,uv:()=>u,Qy:()=>l,IL:()=>c,Li:()=>s,OW:()=>p,ZO:()=>f,Um:()=>y,TF:()=>m,Ls:()=>d,Ec:()=>b,Eu:()=>O,JJ:()=>h,nZ:()=>g,YD:()=>E,GI:()=>v,Jb:()=>S,Uh:()=>T,e$:()=>A,eh:()=>N,$j:()=>P,Mk:()=>_,xy:()=>w,o6:()=>I,FP:()=>j,Mo:()=>R,sO:()=>L,Px:()=>x,hd:()=>M,Ju:()=>C,BV:()=>D,SO:()=>G,H0:()=>k,$X:()=>Z,ou:()=>z,NE:()=>H});var r="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",a="CHANGE_ZOOM_LVL",u="PAN_TO",l="ZOOM_TO_EXTENT",c="ZOOM_TO_POINT",s="CHANGE_MAP_CRS",p="CHANGE_MAP_SCALES",f="CHANGE_MAP_STYLE",y="CHANGE_ROTATION",m="CREATION_ERROR_LAYER",d="UPDATE_VERSION",b="INIT_MAP",O="RESIZE_MAP",h="CHANGE_MAP_LIMITS",g="SET_MAP_RESOLUTIONS",E="REGISTER_EVENT_LISTENER",v="UNREGISTER_EVENT_LISTENER",S="MOUSE_MOVE",T="MOUSE_OUT",A="MAP:MAP_PLUGIN_LOAD",N="MAP:ORIENTATION",P="MAP:UPDATE_MAP_VIEW";function _(e,t,n,r){return{type:A,mapType:t,loading:e,loaded:n,error:r}}function w(e,t,n){return{type:c,pos:e,zoom:t,crs:n}}function I(e,t,n,o,i,a,u,l){return{type:r,center:e,zoom:t,bbox:n,size:o,mapStateSource:i,projection:a,viewerOptions:u,resolution:l}}function j(e,t){return{type:o,point:e,layer:t}}function R(e){return{type:i,pointer:e}}function L(e,t){return{type:a,zoom:e,mapStateSource:t}}function x(e,t,n,r){return{type:l,extent:e,crs:t,maxZoom:n,options:r}}function M(e,t){return{type:f,style:e,mapStateSource:t}}function C(){return{type:O}}function D(e){var t=e.restrictedExtent,n=e.crs,r=e.minZoom;return{type:h,restrictedExtent:t,crs:n,minZoom:r}}function G(e){return{type:g,resolutions:e}}var k=function(e,t){return{type:E,eventName:e,toolName:t}},Z=function(e,t){return{type:v,eventName:e,toolName:t}},z=function(e){return{type:S,position:e}},H=function(){return{type:T}}},12440:(e,t,n)=>{"use strict";n.d(t,{p5:()=>r,aW:()=>o,kn:()=>i,br:()=>a,aE:()=>u,vm:()=>l,H4:()=>c,_p:()=>s,_H:()=>p,j7:()=>f,wg:()=>y,qQ:()=>m,K4:()=>d,_W:()=>b,Jd:()=>O,wD:()=>h,bM:()=>g,yW:()=>E});var r="IMPORT::SET_LAYERS",o="IMPORT::ON_ERROR",i="IMPORT::ON_SELECT_LAYER",a="IMPORT::LOADING",u="IMPORT::ON_LAYER_ADDED",l="IMPORT::UPDATE_BBOX",c="IMPORT::ON_SUCCESS",s="ON_SHAPE_ERROR",p="IMPORT::ON_LAYER_SKIPPED";function f(e,t){return{type:r,layers:e,errors:t}}function y(e){return{type:i,layer:e}}function m(e){return{type:o,error:e}}function d(e){return{type:a,status:e}}function b(e){return{type:u,layer:e}}function O(e){return{type:l,bbox:e}}function h(e){return{type:c,message:e}}function g(e){return{type:s,message:e}}function E(e){return{type:p,layer:e}}},442416:(e,t,n)=>{"use strict";n.d(t,{H:()=>r,q:()=>o});var r="SET_STYLE_PARAMETER";function o(e,t){return{type:r,name:e,value:t}}},615402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(675263),o=n.n(r),i=n(124852),a=n.n(i);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function y(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var d=n(868195).FormattedHTMLMessage,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function u(){return l(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(d,{id:this.props.msgId,values:this.props.msgParams}):a().createElement("span",null,this.props.msgId||"")}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a().Component);y(b,"propTypes",{msgId:o().string.isRequired,msgParams:o().object}),y(b,"contextTypes",{intl:o().object});const O=b},38560:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(480681),o=n(124852),i=n.n(o),a=n(294184),u=n.n(a),l=["disabled","className","onClick"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}const s=(p=r.Button,i().forwardRef((function(e,t){var n=e.disabled,r=e.className,o=e.onClick,a=void 0===o?function(){}:o,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,l);return i().createElement(p,c({ref:t,className:n?u()("disabled",r):r,onClick:function(){n||a.apply(void 0,arguments)}},s),s.children)})));var p},532425:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(675263),o=n.n(r),i=n(124852),a=n.n(i);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){return e>100?"full":e>40?"medium":"small"},f=function(e){var t=e.size,n=e.style,r=void 0===n?{}:n,o=e.className,i=e.hidden;return a().createElement("div",{className:o,style:c({width:t,height:t,overflow:"hidden"},r)},!i&&a().createElement("div",{className:"mapstore-".concat(p(t),"-size-loader")}))};f.propTypes={size:o().number,className:o().string,style:o().object};const y=f},61018:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(124852),o=n.n(r),i=n(807472),a=n(480681);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var l=["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y=function(e){var t=e.show,n=e.style,r=void 0===n?{}:n,u=e.modal,s=e.draggable,f=void 0!==s&&s,y=e.closeGlyph,m=void 0===y?"1-close":y,d=e.closable,b=void 0===d||d,O=e.onClose,h=void 0===O?function(){}:O,g=e.title,E=e.header,v=e.footer,S=e.children,T=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,l);return t?o().createElement(i.Z,c({modal:u,onClickOut:b&&u?function(){return h()}:null,style:p(p({},r),{},{display:t?"block":"none"}),draggable:f},T),o().createElement("span",{role:"header"},g||E||o().createElement("span",null," "),b?o().createElement("button",{onClick:function(){return h()},className:"settings-panel-close close"},o().createElement(a.Glyphicon,{glyph:m})):null),o().createElement("span",{role:"body"},S),v?o().createElement("span",{role:"footer"},v):null):null}},420080:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var r=n(124852),o=n.n(r),i=n(171703),a=n(481756),u=n(12440),l=n(197395),c=n(801550),s=n(580416),p=n(242780),f=n(673781),y=n(782904),m=n(727418),d=n.n(m),b=n(480681),O=n(93152);const h={MapImportPlugin:d()({loadPlugin:function(e){Promise.resolve().then(function(){var t=n(837075).default,r=(0,i.connect)((function(e){return{enabled:e.controls&&e.controls.mapimport&&e.controls.mapimport.enabled,layers:e.mapimport&&e.mapimport.layers||null,selected:e.mapimport&&e.mapimport.selected||null,bbox:e.mapimport&&e.mapimport.bbox||null,success:e.mapimport&&e.mapimport.success||null,errors:e.mapimport&&e.mapimport.errors||null,shapeStyle:e.style||{},mapType:(0,O.$v)(e),annotationsLayer:(0,f.sB)(e)}}),{setLayers:u.j7,onLayerAdded:u._W,onLayerSkipped:u.yW,onSelectLayer:u.wg,onError:u.qQ,onSuccess:u.wD,addLayer:s.A4,loadAnnotations:p.wP,onZoomSelected:c.Px,updateBBox:u.Jd,setLoading:u.K4,onClose:y.Xi.bind(null,"mapimport",null),warning:l.Kp})(t);e(r)}.bind(null,n)).catch(n.oe)},enabler:function(e){return e.mapimport&&e.mapimport.enabled||e.toolbar&&"import"===e.toolbar.active}},{disablePluginIf:"{state('mapType') === 'cesium'}",BurgerMenu:{name:"import",position:4,text:o().createElement(a.Z,{msgId:"mapImport.title"}),tooltip:"mapImport.tooltip",icon:o().createElement(b.Glyphicon,{glyph:"upload"}),action:y.Xi.bind(null,"mapimport",null),priority:2,doNotHide:!0}}),reducers:{mapimport:n(183807).Z,style:n(318323).Z}}},837075:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>bt});var r=n(867076),o=n(22222),i=n(124852),a=n.n(i),u=n(855033),l=n.n(u),c=n(480681),s=n(38560),p=(0,n(815135).Z)(s.Z);const f=function(e){var t=e.accept,n=e.children,r=e.onRef,o=void 0===r?function(){}:r,i=e.onClose,u=void 0===i?function(){}:i,s=e.onDrop,f=void 0===s?function(){}:s,y=e.onDragEnter,m=void 0===y?function(){}:y,d=e.onDragLeave,b=void 0===d?function(){}:d;return a().createElement(l(),{disableClick:!0,ref:o,id:"DRAGDROP_IMPORT_ZONE",style:{position:"relative",height:"100%"},accept:t,onDrop:f,onDragEnter:m,onDragLeave:b},a().createElement("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,background:"rgba(0,0,0,0.75)",color:"#fff",zIndex:2e3,display:"flex",textAlign:"center"}},a().createElement(p,{style:{border:"none",background:"transparent",color:"white",fontSize:35,top:0,right:0,position:"absolute"},onClick:function(){return u()}},a().createElement(c.Glyphicon,{glyph:"1-close"})),a().createElement("div",{style:{margin:"auto",maxWidth:550}},n)))};var y=n(532425),m=n(805346),d=n(615402);const b=function(e){var t=e.openFileDialog;return a().createElement("div",null,a().createElement(d.Z,{msgId:"mapImport.dropZone.heading"}),t?a().createElement(s.Z,{bsStyle:"primary",onClick:t},a().createElement(m.Z,{msgId:"mapImport.dropZone.selectFiles"})):null,a().createElement("br",null),a().createElement("br",null),a().createElement(d.Z,{msgId:"mapImport.dropZone.infoSupported"}),a().createElement("hr",null),a().createElement(d.Z,{msgId:"mapImport.dropZone.note"}))};var O=["error"];var h={FILE_NOT_SUPPORTED:a().createElement(m.Z,{msgId:"mapImport.errors.fileNotSupported"}),PROJECTION_NOT_SUPPORTED:a().createElement(m.Z,{msgId:"mapImport.errors.projectionNotSupported"})};const g=(0,r.compose)((0,r.branch)((function(e){return e.loading}),(0,r.renderComponent)((function(){return a().createElement("div",{style:{margin:"auto",maxWidth:550}},a().createElement(y.Z,{size:80,color:"#ffffff",style:{margin:"auto"}}),a().createElement("h4",null,a().createElement(m.Z,{msgId:"loading"})))}))),(0,r.branch)((function(e){return e.error}),(0,r.renderComponent)((function(e){var t=e.error,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,O);return a().createElement("div",{style:{margin:"auto",maxWidth:550}},a().createElement("div",null,a().createElement(c.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:80}})),a().createElement("h5",null,function(e){return e?h[e.message]||h[e]||a().createElement("span",null,a().createElement(m.Z,{msgId:"mapImport.errors.unknownError"}),":",a().createElement(c.Alert,{bsStyle:"warning"},e.message)):a().createElement(m.Z,{msgId:"mapImport.errors.unknownError"})}(t)),a().createElement(b,n))}))))((function(e){return a().createElement("div",null,a().createElement("div",null,a().createElement(c.Glyphicon,{glyph:"upload",style:{fontSize:80}})),a().createElement(b,e))}));var E=n(966085),v=n.n(E),S=n(500711),T=n.n(S),A=n(227361),N=n.n(A),P=n(359704),_=n.n(P),w=n(49977),I=n.n(w),j=n(446707),R=n(737275),L=n(988753),x=n(624262);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function C(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==M(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===M(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){return new Promise((function(t,n){var r=(0,L.jU)(e.name),o=e.type||L.Yf[r];"application/x-zip-compressed"===o||"application/zip"===o||"application/vnd.google-earth.kml+xml"===o||"application/vnd.google-earth.kmz"===o||"application/gpx+xml"===o||"application/json"===o||"application/vnd.wmc"===o?t(e):function(e){return(0,L.xp)(e).then((function(e){return(new(v())).loadAsync(e)}))}(e).then((function(){return t(e)})).catch((function(){return n(new Error("FILE_NOT_SUPPORTED"))}))}))};const H=(0,r.compose)((0,r.mapPropsStream)((function(e){var t=(0,r.createEventHandler)(),n=t.handler,o=t.stream,i=(0,r.createEventHandler)(),a=i.handler,u=i.stream;return e.combineLatest(o.switchMap((function(e){return I().Observable.from(e).flatMap(z).flatMap(function(e){return function(t){var n=(0,L.jU)(t.name),r=t.type||L.Yf[n],o=R.ZP.getConfigProp("projectionDefs")||[],i=(o.length&&o.map((function(e){return e.code}))||[]).concat(["EPSG:4326","EPSG:3857","EPSG:900913"]);return"application/vnd.google-earth.kml+xml"===r?(0,L.BP)(t).then((function(e){return(0,L.bf)(e)})):"application/gpx+xml"===r?(0,L.BP)(t).then((function(e){return(0,L.cX)(e,t.name)})):"application/vnd.google-earth.kmz"===r?(0,L.N)(t).then((function(e){return(0,L.bf)(e)})):"application/x-zip-compressed"===r||"application/zip"===r?(0,L.xp)(t).then((function(n){return(0,L.Lz)(n).then((function(r){r.length>0&&e({type:"warning",filename:t.name,message:"shapefile.error.missingPrj"});var o=(0,L.mr)(n).map((function(e){return k(k({},e),{},{filename:t.name})}));if(_()(o,(function(e){return!!N()(e,"map.projection")}))){var a=o.filter((function(e){return!!N()(e,"map.projection")}));if(T()(a,(function(e){return i.includes(e.map.projection)})))return o;throw new Error("PROJECTION_NOT_SUPPORTED")}return o}))})):"application/json"===r?(0,L.zr)(t).then((function(e){var n=N()(e,"map.projection");if(n){if(i.includes(n))return[k(k({},e),{},{fileName:t.name})];throw new Error("PROJECTION_NOT_SUPPORTED")}return[k(k({},e),{},{fileName:t.name})]})):"application/vnd.wmc"===r?(0,L.IN)(t).then((function(e){return[k(k({},e),{},{fileName:t.name})]})):null}}(a)).reduce((function(e,t){return{layers:(e.layers||[]).concat(t.filter((function(e){return function(e){return e&&e.features&&0!==e.features.length}(e)})).map((function(e){return(0,j.Ag)(e)?{name:"Annotations",features:(null==e?void 0:e.features)||[],filename:e.filename}:k(k({},(0,x.Rt)(e)),{},{filename:e.filename})}))),maps:(e.maps||[]).concat(t.filter((function(e){return function(e){return e&&e.version&&e.map}(e)})))}}),{}).map((function(e){return{loading:!1,files:e}})).catch((function(e){return I().Observable.of({error:e,loading:!1})})).startWith({loading:!0})})).startWith({}),(function(e,t){return k(k(k({},e),t),{},{onDrop:n})})).combineLatest(u.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(C(e),[t])}),[]).startWith(void 0),(function(e,t){return k(k({},e),{},{warnings:t})}))})));var F=n(986267);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==U(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===U(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const V=(0,r.compose)((0,r.withHandlers)({useFiles:function(e){var t=e.currentMap,n=e.loadMap,r=void 0===n?function(){}:n,o=e.loadMapInfo,i=void 0===o?function(){}:o,a=e.onClose,u=void 0===a?function(){}:a,l=e.setLayers,c=void 0===l?function(){}:l,s=e.annotationsLayer,p=e.loadAnnotations,f=void 0===p?function(){}:p,y=e.warning,m=void 0===y?function(){}:y;return function(e,n){var o=e.layers,a=void 0===o?[]:o,l=e.maps,p=(void 0===l?[]:l)[0];if(p){var y=t.zoom,d=t.center,b=t.mapId,O=p.fileName;r(B(B({},p),{},{map:B(B({},p.map),{},{zoom:p.map.zoom||y,center:p.map.center||d})}),b||null,!p.map.zoom&&(p.map.bbox||{bounds:p.map.maxExtent})),b&&O&&i(b),u()}if(a.length>0){var h=a&&"Annotations"===a[0].name;if(!s&&h)f(a[0].features,!1),u();else{var g=[];a.forEach((function(e){var t;"vector"!==e.type||(0,F.checkIfLayerFitsExtentForProjection)(e)?g.push(e):m({title:"notification.warning",message:"mapImport.errors.fileBeyondBoundaries",autoDismiss:6,position:"tc",values:{filename:null!==(t=e.name)&&void 0!==t?t:" "}})})),c(g,n)}}}}}),(0,r.mapPropsStream)((function(e){return e.merge(e.distinctUntilKeyChanged("files").filter((function(e){return e.files})).do((function(e){var t=e.files,n=e.useFiles,r=void 0===n?function(){}:n,o=e.warnings;return r(t,void 0===o?[]:o)})).ignoreElements())}))),X=(0,r.compose)((0,r.withHandlers)((function(){var e=null;return{onRef:function(){return function(t){return e=t}},openFileDialog:function(){return function(){return e.open()}}}})));var $=["onClose","onDrop","onRef"];const K=(0,r.compose)(H,V,X)((function(e){var t=e.onClose,n=void 0===t?function(){}:t,r=e.onDrop,o=void 0===r?function(){}:r,i=e.onRef,u=void 0===i?function(){}:i,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,$);return a().createElement(f,{onClose:n,onDrop:o,onRef:u},a().createElement(g,l))}));var q=n(171703),J=n(675263),Q=n.n(J),ee=n(481756),te=n(12440),ne=n(442416),re=n(747037),oe=n.n(re),ie=n(200020),ae=n(86638),ue=n(472986),le=n.n(ue),ce=n(882702);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,he(r.key),r)}}function ye(e,t){return ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ye(e,t)}function me(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return de(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function Oe(e,t,n){return(t=he(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e){var t=function(e,t){if("object"!==se(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===se(t)?t:String(t)}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ye(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(r);if(o){var n=be(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return me(this,e)});function u(){var e;pe(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oe(de(e=i.call.apply(i,[this].concat(n))),"tryUnzip",(function(e){return(0,L.xp)(e).then((function(e){return(new(v())).loadAsync(e)}))})),Oe(de(e),"checkFileType",(function(t){return new ce.Promise((function(n,r){var o=(0,L.jU)(t.name),i=t.type||L.Yf[o];"application/x-zip-compressed"===i||"application/zip"===i||"application/vnd.google-earth.kml+xml"===i||"application/vnd.google-earth.kmz"===i||"application/gpx+xml"===i?n():e.tryUnzip(t).then(n).catch(r)}))})),Oe(de(e),"checkfile",(function(t){ce.Promise.all(t.map((function(t){return e.checkFileType(t)}))).then((function(){e.props.error&&e.props.onShapeError(null),e.props.onShapeChoosen(t)})).catch((function(){var t=(0,ae.S$)(e.context.messages,e.props.errorMessage);e.props.onShapeError(t)}))})),e}return t=u,(n=[{key:"render",value:function(){return this.props.loading?a().createElement("div",{className:"btn btn-info",style:{float:"center"}}," ",a().createElement(le(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"})):a().createElement(l(),{rejectClassName:"alert-danger",className:"alert alert-info",onDrop:this.checkfile},a().createElement("div",{className:"dropzone-content",style:{textAlign:"center"}},this.props.text))}}])&&fe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a().Component);Oe(ge,"propTypes",{text:Q().oneOfType([Q().string,Q().element]),loading:Q().bool,onShapeChoosen:Q().func,onShapeError:Q().func,error:Q().oneOfType([Q().string,Q().element]),errorMessage:Q().string}),Oe(ge,"contextTypes",{messages:Q().object}),Oe(ge,"defaultProps",{text:"Drop or click to import a local Shape",onShapeChoosen:function(){},onShapeError:function(){},errorMessage:"shapefile.error.select"});const Ee=ge;function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,je(r.key),r)}}function Ne(e,t){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ne(e,t)}function Pe(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _e(e)}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function Ie(e,t,n){return(t=je(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e){var t=function(e,t){if("object"!==ve(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ve(t)?t:String(t)}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ne(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=we(r);if(o){var n=we(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Pe(this,e)});function u(){var e;Te(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ie(_e(e=i.call.apply(i,[this].concat(n))),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0}),Ie(_e(e),"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),Ie(_e(e),"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,n){var r=e.getGeometryType(n.geometry);return t?r===t?t:"GeometryCollection":r}),null):null})),Ie(_e(e),"renderError",(function(){return a().createElement(c.Row,null,a().createElement("div",{style:{textAlign:"center"},className:"alert alert-danger"},a().createElement(m.Z,{msgId:e.props.error})))})),Ie(_e(e),"renderSuccess",(function(){return a().createElement(c.Row,null,a().createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),Ie(_e(e),"renderStyle",(function(){return e.props.stylers[e.getGeomType(e.props.selected)]})),Ie(_e(e),"renderDefaultStyle",(function(){return e.props.selected?a().createElement(c.Row,null,a().createElement(c.Col,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),a().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.defaultStyle"}))),a().createElement(c.Col,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),a().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.zoom"})))):null})),Ie(_e(e),"addShape",(function(t){e.props.shapeLoading(!0);var n=e.props.readFiles(t,e.props.onShapeError);ce.Promise.all(n).then((function(t){var n=t.filter((function(e){return e[0]&&e[0].features&&0!==e[0].features.length||"Feature"===e[0].type}));n=n.reduce((function(t,n){return n?t.concat(n.map((function(t){return(0,x.Rt)(t,e.props.createId(t,n))}))):t}),[]),e.props.onShapeChoosen(n),e.props.shapeLoading(!1)})).catch((function(t){e.props.shapeLoading(!1);var n=t&&t.name||t||"";oe()(n)&&"SyntaxError"===n?e.props.onShapeError("shapefile.error.shapeFileParsingError"):e.props.onShapeError("shapefile.error.genericLoadError")}))})),Ie(_e(e),"addToMap",(function(){e.props.shapeLoading(!0);var t=e.props.selected;ce.Promise.resolve(e.props.addShapeLayer(t)).then((function(){e.props.shapeLoading(!1);var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateShapeBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326")),e.props.onShapeSuccess(e.props.layers[0].name+(0,ae.S$)(e.context.messages,"shapefile.success")),e.props.onLayerAdded(e.props.selected)})).catch((function(){e.props.shapeLoading(!1),e.props.onShapeError("shapefile.error.genericLoadError")}))})),e}return t=u,(n=[{key:"render",value:function(){var e=this;return a().createElement(c.Grid,{role:"body",style:{width:"300px"},fluid:!0},this.props.error?this.renderError():null,this.props.success?this.renderSuccess():null,a().createElement(c.Row,{style:{textAlign:"center"}},this.props.selected?a().createElement(ie.DropdownList,{data:this.props.layers,value:this.props.selected,onSelect:function(t){return e.props.onSelectLayer(t)},valueField:"id",textField:"name"}):a().createElement(Ee,Se({},this.props.uploadOptions,{errorMessage:"shapefile.error.select",text:this.props.uploadMessage,onShapeChoosen:this.addShape,onShapeError:this.props.onShapeError}))),a().createElement(c.Row,{style:{marginBottom:10}},this.state.useDefaultStyle?null:this.renderStyle()),this.renderDefaultStyle(),this.props.selected?a().createElement(c.Row,null,a().createElement(c.Col,{xsOffset:6,xs:3}," ",a().createElement(s.Z,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.onShapeChoosen(null)}},this.props.cancelMessage)),a().createElement(c.Col,{xs:3}," ",a().createElement(s.Z,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},this.props.addMessage))):null)}}])&&Ae(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a().Component);Ie(Re,"propTypes",{bbox:Q().array,layers:Q().array,selected:Q().object,style:Q().object,shapeStyle:Q().object,readFiles:Q().func,onShapeError:Q().func,onShapeSuccess:Q().func,onShapeChoosen:Q().func,addShapeLayer:Q().func,shapeLoading:Q().func,onSelectLayer:Q().func,onLayerAdded:Q().func,onZoomSelected:Q().func,updateShapeBBox:Q().func,error:Q().string,success:Q().string,mapType:Q().string,buttonSize:Q().string,uploadMessage:Q().object,cancelMessage:Q().object,addMessage:Q().object,stylers:Q().object,uploadOptions:Q().object,createId:Q().func}),Ie(Re,"contextTypes",{messages:Q().object}),Ie(Re,"defaultProps",{shapeLoading:function(){},readFiles:function(e,t){return e.map((function(e){var n=(0,L.jU)(e.name),r=e.type||L.Yf[n];return"application/vnd.google-earth.kml+xml"===r?(0,L.BP)(e).then((function(e){return(0,L.bf)(e)})):"application/gpx+xml"===r?(0,L.BP)(e).then((function(e){return(0,L.cX)(e)})):"application/vnd.google-earth.kmz"===r?(0,L.N)(e).then((function(e){return(0,L.bf)(e)})):"application/x-zip-compressed"===r||"application/zip"===r?(0,L.xp)(e).then((function(e){return(0,L.Lz)(e).then((function(n){return n.length>0&&t("shapefile.error.missingPrj"),(0,L.mr)(e)}))})):null}))},mapType:"leaflet",stylers:{},buttonSize:"small",uploadOptions:{},createId:function(){},bbox:null});const Le=Re;var xe=n(970674),Me=n(458272),Ce=n(36401),De=((0,q.connect)((function(e){return{uploadOptions:{error:e.mapimport&&e.mapimport.error||null,loading:e.mapimport&&e.mapimport.loading||!1}}}),{onShapeError:te.bM})(Le),(0,q.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:ne.q})(Me.Z)),Ge=(0,q.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:ne.q})(xe.Z),ke=(0,q.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:ne.q})(Ce.Z),Ze=n(727418),ze=n.n(Ze),He=function(e){return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},Fe={r:255,g:0,b:0,a:1},Ue=function(e,t){var n=ze()({},e),r=function(e){return e.features&&e.features[0]?e.features[0].geometry&&e.features[0].geometry.type:void 0}(e);!t.marker||"Point"!==r&&"MultiPoint"!==r||(n.styleName="marker",n.handleClickOnLayer=!0);var o=t||{},i=o.color,a=void 0===i?Fe:i,u=o.fill,l=void 0===u?Fe:u;return n.style={weight:t.width,radius:t.radius,opacity:a.a,fillOpacity:l.a,color:He(a),fillColor:He(l)},n};function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function We(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qe(r.key),r)}}function Xe(e,t){return Xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xe(e,t)}function $e(e,t){if(t&&("object"===Ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ke(e)}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}function Je(e,t,n){return(t=Qe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e){var t=function(e,t){if("object"!==Ye(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ye(t)?t:String(t)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xe(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qe(r);if(o){var n=qe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return $e(this,e)});function u(){var e;We(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Je(Ke(e=i.call.apply(i,[this].concat(n))),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0,overrideAnnotation:!1,initialLayers:[]}),Je(Ke(e),"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),Je(Ke(e),"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,n){var r=e.getGeometryType(n.geometry);return t?r===t?t:"GeometryCollection":r}),null):null})),Je(Ke(e),"renderError",(function(){return e.props.errors&&e.props.errors.filter((function(t){return(t.filename||t.name)&&e.props.layers&&e.props.layers[0]&&(e.props.layers[0].filename===t.filename||e.props.layers[0].name===t.name)})).map((function(e){return a().createElement(c.Row,{key:e&&e.name+e.message},a().createElement(c.Alert,{bsStyle:e.type,style:{textAlign:"center"}},a().createElement(m.Z,{msgId:e.message})))}))})),Je(Ke(e),"renderSuccess",(function(){return a().createElement(c.Row,null,a().createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),Je(Ke(e),"renderDisableStyleCustomization",(function(e){return e?a().createElement("div",{className:"alert alert-info mb-2 style-customisation-disabled-container"},a().createElement(m.Z,{msgId:"shapefile.styleCustomizationDisabled"})):null})),Je(Ke(e),"findLayerSerialNumber",(function(t){var n=t.name;return e.state.initialLayers.findIndex((function(e){return e.name===n}))+1})),Je(Ke(e),"addToMap",(function(){var t=e.props.selected;e.state.useDefaultStyle||(t=Ue(t,e.props.shapeStyle));var n=(0,j.Ag)(t);ce.Promise.resolve(n?e.props.loadAnnotations(t.features,e.state.overrideAnnotation):e.props.addLayer(t)).then((function(){if(!n){var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326"))}e.props.onSuccess(e.props.layers.length>1?n?"Annotation":e.props.layers[0].name+(0,ae.S$)(e.context.messages,"shapefile.success"):void 0),e.props.onLayerAdded(e.props.selected)})).catch((function(t){e.props.onError({type:"error",name:n?"Annotation":e.props.layers[0].name,error:t,message:"shapefile.error.genericLoadError"})}))})),Je(Ke(e),"annotationOptions",(function(){return a().createElement(a().Fragment,null,a().createElement(c.Col,{xs:2},a().createElement("input",{type:"radio",checked:!e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!1})}})),a().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.merge"}))),a().createElement(c.Col,{xs:2},a().createElement("input",{type:"radio",checked:e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!0})}})),a().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.replace"}))))})),e}return t=u,n=[{key:"componentDidMount",value:function(){var e;this.setState({initialLayers:(e=this.props.layers,function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})}},{key:"render",value:function(){var e=this,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!e||!e.features.length)&&e.features.reduce((function(e,t){var n=t.style&&Array.isArray(t.style)&&t.style.length||Object.keys(t.style||{}).length;return e||!!n}),!1)}(this.props.selected);return a().createElement(c.Grid,{role:"body",style:{width:"400px"},fluid:!0},this.props.errors?this.renderError():null,this.props.success?this.renderSuccess():null,a().createElement(c.Row,null,a().createElement("h4",null,a().createElement("span",{style:{fontWeight:"bold"}},a().createElement(m.Z,{msgId:"shapefile.layerOf",msgParams:{count:this.findLayerSerialNumber(this.props.selected),total:this.state.initialLayers.length}}))," ",this.props.selected.name)),a().createElement(c.Row,{key:"styler",style:{marginBottom:10}},this.state.useDefaultStyle||t?null:this.props.stylers[this.getGeomType(this.props.selected)]),this.renderDisableStyleCustomization(t),a().createElement(c.Row,{key:"options"},(0,j.Ag)(this.props.selected)?this.annotationOptions():a().createElement(a().Fragment,null,a().createElement(c.Col,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",disabled:t,checked:t||this.state.useDefaultStyle,defaultChecked:t||this.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),a().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.defaultStyle"}))),a().createElement(c.Col,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),a().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.zoom"}))))),a().createElement(c.Row,null,a().createElement(c.ButtonToolbar,{style:{display:"flex",justifyContent:"flex-end"}},a().createElement(s.Z,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.setLayers(null)}},this.props.cancelMessage),a().createElement(s.Z,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){return e.props.onLayerSkipped(e.props.selected)}},this.props.skipMessage),a().createElement(s.Z,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},1===this.props.layers.length?this.props.finishMessage:this.props.nextMessage))))}}],n&&Ve(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a().Component);Je(et,"propTypes",{bbox:Q().array,layers:Q().array,selected:Q().object,style:Q().object,shapeStyle:Q().object,onError:Q().func,onSuccess:Q().func,setLayers:Q().func,addLayer:Q().func,loadAnnotations:Q().func,onSelectLayer:Q().func,onLayerAdded:Q().func,onLayerSkipped:Q().func,onZoomSelected:Q().func,updateBBox:Q().func,errors:Q().array,success:Q().string,mapType:Q().string,buttonSize:Q().string,cancelMessage:Q().object,addMessage:Q().object,stylers:Q().object,nextMessage:Q().object,finishMessage:Q().object,skipMessage:Q().object}),Je(et,"contextTypes",{messages:Q().object}),Je(et,"defaultProps",{mapType:"leaflet",buttonSize:"small",setLayers:function(){},addLayer:function(){},loadAnnotations:function(){},updateBBox:function(){},onZoomSelected:function(){},stylers:{},bbox:null});const tt=et;var nt=n(61018);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(){return ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ot.apply(this,arguments)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pt(r.key),r)}}function ut(e,t){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ut(e,t)}function lt(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ct(e){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ct(e)}function st(e,t,n){return(t=pt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e){var t=function(e,t){if("object"!==rt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===rt(t)?t:String(t)}var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ct(r);if(o){var n=ct(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return lt(this,e)});function u(){return it(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e={Polygon:a().createElement(De,null),MultiPolygon:a().createElement(De,null),GeometryCollection:a().createElement(De,null),LineString:a().createElement(ke,null),MultiLineString:a().createElement(ke,null),MultiPoint:a().createElement(Ge,null),Point:a().createElement(Ge,null)},t=a().createElement(tt,ot({},this.props,{setLayers:this.props.setLayers,stylers:e,uploadMessage:a().createElement(ee.Z,{msgId:this.props.uploadMessage}),cancelMessage:a().createElement(ee.Z,{msgId:"shapefile.cancel"}),nextMessage:a().createElement(ee.Z,{msgId:"shapefile.next"}),finishMessage:a().createElement(ee.Z,{msgId:"shapefile.finish"}),skipMessage:a().createElement(ee.Z,{msgId:"shapefile.skip"})}));return this.props.layers?a().createElement(nt.Z,{id:"import-style-dialog",onClose:this.props.onClose,modal:this.props.modal,show:!0,header:a().createElement(ee.Z,{msgId:"shapefile.title"})},t):t}}])&&at(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a().Component);st(ft,"propTypes",{id:Q().string,layers:Q().array,selected:Q().object,style:Q().object,shapeStyle:Q().object,onError:Q().func,setLayers:Q().func,addShapeLayer:Q().func,onSelectLayer:Q().func,onLayerAdded:Q().func,error:Q().string,mapType:Q().string,wrap:Q().bool,wrapWithPanel:Q().bool,panelStyle:Q().object,panelClassName:Q().string,visible:Q().bool,modal:Q().bool,onClose:Q().func,closeGlyph:Q().string,uploadMessage:Q().string,buttonSize:Q().string}),st(ft,"defaultProps",{id:"mapstore-shapefile-upload",uploadMessage:"shapefile.placeholder",wrap:!0,modal:!0,wrapWithPanel:!1,panelStyle:{minWidth:"360px",zIndex:1995,position:"absolute",overflow:"visible",top:"30px",left:"calc(50% - 150px)"},panelClassName:"toolbar-panel",visible:!1,onClose:function(){},closeGlyph:"1-close",buttonSize:"small"});const yt=ft;var mt=n(881808),dt=n(800827);const bt=(0,r.compose)((0,r.mapPropsStream)((function(e){return e.merge(e.filter((function(e){var t=e.layers;return t&&t.length>0})).exhaustMap((function(){return e.filter((function(e){var t=e.layers;return!t||0===t.length})).take(1).do((function(e){var t=e.onClose,n=void 0===t?function(){}:t;return n&&n()})).ignoreElements()})))})),(0,r.branch)((function(e){return!e.enabled}),r.renderNothing),(0,r.branch)((function(e){var t=e.layers;return!t||0===t.length}),(0,r.compose)((0,q.connect)((0,o.zB)({currentMap:dt.Od}),{loadMap:mt.H0,loadMapInfo:mt.I6}),(0,r.renderComponent)(K))))(yt)},481756:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(171703),o=n(805346);const i=(0,r.connect)((function(e){return{locale:e.locale&&e.locale.currentLocale,messages:e.locale&&e.locale.messages||[]}}))(o.Z)},183807:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(12440),o=n(187185),i=n.n(o),a=n(782904),u=n(727418),l=n.n(u);function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p={layers:null,errors:null,loading:!1,selected:null,bbox:[190,190,-190,-190]};const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r._p:return l()({},e,{error:t.message,success:null});case r.p5:var n=t.layers&&t.layers[0]?t.layers[0]:null,o=t.layers?t.errors:null;return l()({},e,{layers:t.layers,selected:n,bbox:[190,190,-190,-190],errors:o},n?{}:{success:null});case r.aW:return l()({},e,{errors:i()([].concat(c(e.errors||[]),[t.error]),(function(e,t){return(e.name&&e.name===t.name||e.filename&&e.filename===t.fileName)&&e.message===t.message})),success:null});case r.br:return l()({},e,{loading:t.status});case r.kn:return l()({},e,{selected:t.layer});case r.aE:var u=e.layers.filter((function(e){return t.layer.name!==e.name}),this),s=u&&u[0]?u[0]:null;return l()({},e,{layers:u,selected:s},s?{}:{bbox:[190,190,-190,-190]});case r.vm:return l()({},e,{bbox:t.bbox});case r.H4:return l()({},e,{success:t.message,errors:null,error:null});case a.kM:return"shapefile"===t.control?l()({},e,{errors:null,success:null}):e;case r._H:var f=e.layers.filter((function(e){return t.layer.name!==e.name}),this),y=f&&f[0]?f[0]:null;return l()({},e,{layers:f,selected:y,success:null});default:return e}}},318323:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(442416),o=n(727418),i=n.n(o);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={color:{r:0,g:0,b:255,a:1},width:3,fill:{r:0,g:0,b:255,a:.1},radius:10,marker:!1};const c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;return t.type===r.H?i()({},e,u({},t.name,t.value)):e}},673781:(e,t,n)=>{"use strict";n.d(t,{sB:()=>h,_o:()=>g,cM:()=>w,Cq:()=>Y,cQ:()=>X,dm:()=>$});var r=n(22222),o=n(675110),i=n(800827),a=n(93152),u=n(307877),l=n(91175),c=n.n(l),s=n(227361),p=n.n(s),f=n(727418),y=n.n(f),m=n(737275);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=(0,r.P1)([o.l2],(function(e){return c()(e.filter((function(e){return"annotations"===e.id})))})),g=function(e){return p()(e,"annotations.config.multiGeometry",!1)},E=function(e){return p()(e,"annotations.removing")},v=function(e){return p()(e,"annotations.format")},S=function(e){return p()(e,"annotations.aeronauticalOptions")},T=function(e){return p()(e,"annotations.showUnsavedChangesModal",!1)},A=function(e){return p()(e,"annotations.showUnsavedStyleModal",!1)},N=function(e){return p()(e,"annotations.showUnsavedGeometryModal",!1)},P=function(e){return p()(e,"annotations.showDeleteFeatureModal",!1)},_=function(e){return!!p()(e,"annotations.closing")},w=function(e){return p()(e,"annotations.editing")},I=function(e){return p()(e,"annotations.editGeometry",!0)},j=function(e){return p()(e,"annotations.featureType")},R=function(e){return p()(e,"annotations.coordinateEditorEnabled")},L=function(e){return!!p()(e,"annotations.drawing")},x=function(e){return p()(e,"annotations.stylerType")},M=function(e){return p()(e,"annotations.drawingText")},C=function(e){return p()(e,"annotations.editedFields",{})},D=function(e){return!!p()(e,"annotations.styling")},G=function(e){return p()(e,"annotations.selected",null)},k=function(e){return p()(e,"annotations.unsavedChanges",!1)},Z=function(e){return p()(e,"annotations.unsavedGeometry",!1)},z=function(e){return p()(e,"annotations.unsavedStyle",!1)},H=function(e){return p()(e,"annotations.validationErrors",{})},F=function(e){return p()(e,"annotations.config",{})},U=function(e){return p()(e,"annotations.symbolList",[])},Y=function(e){return p()(e,"annotations.symbolErrors",[])},B=function(e){return(w(e)?"editing":h(e)&&function(e){return p()(e,"annotations.current")}(e)&&"detail")||"list"},W=function(e){return p()(e,"annotations.showAgain",!1)},V=function(e){return p()(e,"annotations.showPopupWarning",!0)},X=function(e){return y()({},{symbolErrors:Y(e),showEdit:(0,a.m6)(e),canEdit:I(e),mouseHoverEvents:(0,u.Qp)(e),closing:_(e),format:v(e)||(0,m.u8)("defaultCoordinateFormat"),aeronauticalOptions:S(e),config:F(e),drawing:L(e),drawingText:M(e),errors:H(e),editing:w(e),coordinateEditorEnabled:R(e),editedFields:C(e),mode:B(e),selected:G(e),featureType:j(e),removing:E(e),mapProjection:(0,i.uy)(e),showUnsavedChangesModal:T(e),showDeleteFeatureModal:P(e),showUnsavedGeometryModal:N(e),showUnsavedStyleModal:A(e),stylerType:x(e),styling:D(e),unsavedChanges:k(e),unsavedGeometry:Z(e),unsavedStyle:z(e),symbolList:U(e),showAgain:W(e),showPopupWarning:V(e)})},$=(0,r.P1)([X,function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.annotations||{})},h,B],(function(e,t,n,r){return y()({},{format:t.format,aeronauticalOptions:t.aeronauticalOptions,removing:t.removing,showUnsavedChangesModal:t.showUnsavedChangesModal,showUnsavedGeometryModal:t.showUnsavedGeometryModal,showUnsavedStyleModal:t.showUnsavedStyleModal,showDeleteFeatureModal:t.showDeleteFeatureModal,closing:!!t.closing,mode:r,annotations:n&&n.features||[],current:t.current||null,editing:e.editing,selected:e.selected,filter:t.filter||"",defaultStyles:t.defaultStyles,loading:t.loading},e.config?{config:e.config}:{})}));(0,r.P1)([$],(function(e){var t=e.current;return{annotation:c()(e.annotations.filter((function(e){return e.properties.id===t})))}}))},105076:(e,t,n)=>{var r=n(989881);e.exports=function(e,t){var n;return r(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}},359704:(e,t,n)=>{var r=n(282908),o=n(267206),i=n(105076),a=n(701469),u=n(816612);e.exports=function(e,t,n){var l=a(e)?r:i;return n&&u(e,t,n)&&(t=void 0),l(e,o(t,3))}}}]);